---
START:
  type: dict
  mandatory:
    story: STORY
  optional:
    vars: VARS
VARS:
  type: list
  elements: VAR
VAR: # Has special built-in checking
  type: dict
  other: _value
STORY:
  type: dict
  mandatory:
    _content: CONTENT
  other: BLOCK
BLOCK:
  type: union
  members:
    - DICT_BLOCK
    - LIST_BLOCK
DICT_BLOCK: # Has special built-in checking
  type: dict
  optional:
    _content: CONTENT
  other: BLOCK
LIST_BLOCK:
  type: list
  elements: INSTR
CONTENT:
  type: list
  elements: INSTR
INSTR:
  type: union
  members:
    - _text
    - CHOICE
    - GOTO
    - IF
    - PRINT
    - RANDOM
CHOICE:
  type: dict
  mandatory:
    choice: _text
    effects: CONTENT
  optional:
    require: _requirement_specification
IF:
  type: dict
  mandatory:
    if: _expr
    then: CONTENT
  optional:
    else: CONTENT
GOTO:
  type: dict
  mandatory:
    goto: _addr
PRINT:
  type: dict
  mandatory:
    print: _text
RANDOM:
  type: dict
  mandatory:
    random: RANDOM_EVENTS_SPEC
RANDOM_EVENTS_SPEC:
  type: union
  members:
    - _addr_list
    - RANDOM_EVENT_DICT
RANDOM_EVENT_DICT:
  type: dict
  other: RANDOM_EVENT
RANDOM_EVENT:
  type: union
  members:
    - _null
    - CONTENT
